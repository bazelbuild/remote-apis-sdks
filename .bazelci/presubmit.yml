---
validate_config: 1
tasks:
  ubuntu1804:
      build_targets:
          - "//..."
      test_targets:
          - "//..."
# Check that "go build / test" works, too.
  ubuntu1804_gobuild:
    platform: ubuntu1804
    name: "go build / test"
    shell_commands:
      - "echo +++ Installing go"
      - "echo running as `whomai` in `pwd`"
      - "ls -la"
      - "wget https://dl.google.com/go/go1.12.5.linux-amd64.tar.gz"
      - "tar -C /usr/local -xzf go1.12.5.linux-amd64.tar.gz"
      - "export PATH=$PATH:/usr/local/go/bin"
      - "echo +++ Running go build"
      - "go build ./..."
      - "echo +++ Running go test"
      - "go test ./..."
